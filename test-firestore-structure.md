# Firestore æ§‹æˆç¢ºèªãƒ¬ãƒãƒ¼ãƒˆ

## âœ… è¨­å®šæ¸ˆã¿é …ç›®

### 1. ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¨­è¨ˆï¼ˆdocs/firestore.mdï¼‰
- `users/{uid}/accounts` - SNSã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±
- `users/{uid}/hashtags` - ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ç›£è¦–è¨­å®š  
- `users/{uid}/tweets` - ãƒ„ã‚¤ãƒ¼ãƒˆç›£è¦–è¨­å®š
- `users/{uid}/dm_logs` - DMé€ä¿¡ãƒ­ã‚°

### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ï¼ˆfirestore.rulesï¼‰
```javascript
// uidãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ãŒè¨­å®šæ¸ˆã¿
match /users/{uid} {
  allow read, write: if request.auth != null && request.auth.uid == uid;
  // å„ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚‚åŒæ§˜ã®åˆ¶å¾¡
}
```

### 3. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®šï¼ˆfirestore.indexes.jsonï¼‰
- SNSç¨®åˆ¥ãƒ»ä½œæˆæ—¥æ™‚ã§ã®ã‚½ãƒ¼ãƒˆ
- DMé€ä¿¡ãƒ­ã‚°ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯ç”¨è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

## ğŸ“‹ ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä¾‹

### accounts ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
```json
{
  "sns_type": "x",
  "account_id": "1234567890", 
  "screen_name": "@example",
  "access_token": "...",
  "connected_at": "2025-06-20T12:34:56Z"
}
```

### hashtags ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³  
```json
{
  "sns_type": "x",
  "account_id": "1234567890",
  "hashtag": "#å¤ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ",
  "enabled": true,
  "created_at": "2025-06-20T13:00:00Z"
}
```

### dm_logs ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
```json
{
  "sns_type": "x",
  "account_id": "1234567890",
  "recipient_user_id": "567890123",
  "dm_type": "hashtag",
  "source_id": "#å¤ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ",
  "sent_at": "2025-06-20T14:00:00Z",
  "status": "success"
}
```

## ğŸ”§ Step1 å®Œäº†çŠ¶æ³

âœ… Firestore ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å®šç¾©å®Œäº†
âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã®è¨­å®šå®Œäº†  
âœ… ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®šã®å®Œäº†
âœ… uid ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡å®Ÿè£…æ¸ˆã¿

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«å‘ã‘ã¦

Step1ã®Firestoreæ§‹æˆå®šç¾©ãŒå®Œäº†ã—ã¾ã—ãŸã€‚
å®Ÿéš›ã®Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®å‹•ä½œç¢ºèªã«ã¯Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã¨.envè¨­å®šãŒå¿…è¦ã§ã™ã€‚