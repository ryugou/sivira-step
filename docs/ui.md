# ui.md

## 🎯 管理画面 UI 定義
本ドキュメントは、クライアントがログイン後に使用するSNS自動DMサービスの管理画面UI構成を定義します。Figma等の設計ツールは使用せず、文章ベースで画面・動作を明示します。

---

## 🔐 認証状態
- Firebase Authentication によりログイン済みのユーザーのみアクセス可能。
- SNSアカウント、登録データはすべて `uid` によってスコープ管理される（他のユーザーからは不可視）。

---

## 🧭 メイン画面構成（ログイン後）

本UIはPC画面を前提に設計（スマホ表示にも対応）し、左側に垂直メニューを配置する：

```
┌───────────────────────────────┐
│ ログイン中ユーザー名またはメールアドレス                │
├───────────────────────────────┤
│ ▸ SNSアカウント連携                                │
│ ▸ ハッシュタグ登録                                  │
│ ▸ 投稿登録                                          │
└───────────────────────────────┘
```

- 各メニューをクリックすると、右側に対応する画面が表示される
- レイアウトはレスポンシブ対応し、モバイル時はハンバーガーメニューに切り替え

画面右上に「ログイン中のユーザー名（またはメールアドレス）」が表示される。

---

## 1. SNSアカウント連携画面

### 📌 機能
- 利用中SNSのOAuth認証を行う
- 現時点で連携可能：X（旧Twitter） / Instagram / Threads / TikTok

### 📋 表示要素
- SNSごとに、接続済みアカウントの一覧を表示（アカウント名＋接続済みの印）
- 各SNSに対して「新しいアカウントを接続する」ボタンを設置 → `/api/sns/connect` 実行でURL生成 → リダイレクト（未接続時） → `/api/sns/connect` 実行でURL生成 → リダイレクト

### 💡 注意
- 接続済みSNSのみが、他タブで選択可能になる

---

## 2. ハッシュタグ登録画面

### 📌 機能
- 特定SNSアカウントに対して、キャンペーン用ハッシュタグを登録
- 1SNSアカウントあたり複数登録可能

### 📋 入力項目
```
[対象SNS]（接続済みのみ選択可）
[対象アカウント]（選択されたSNSに紐づくアカウント）
[ハッシュタグ]（例：#夏のプレゼント）
[登録]ボタン
```

登録済みのハッシュタグ一覧が下部に表示される：
```
[SNS名] | [アカウント名] | [ハッシュタグ] | 実行ボタン
```

### ▶️ 実行ボタン
- 登録済みハッシュタグの一覧表において、各行の右端に表示される
- 手動で `POST /api/execute/hashtag` を実行
- 実行結果は簡易モーダル or トースト通知で表示

---

## 3. 投稿登録画面

### 📌 機能
- 特定SNSアカウントに対して「対象投稿（例：質問募集Tweetなど）」を登録
- 1SNSアカウントあたり複数登録可能

### 📋 入力項目
```
[対象SNS]（接続済みのみ選択可）
[対象アカウント]（選択されたSNSに紐づくアカウント）
[投稿ID]（Xの投稿ID）
[登録]ボタン
```

登録済みの投稿一覧が下部に表示される：
```
[SNS名] | [アカウント名] | [投稿ID] | 実行ボタン
```

### ▶️ 実行ボタン
- 登録済み投稿の一覧表において、各行の右端に表示される
- 手動で `POST /api/execute/reply` を実行
- 実行結果は簡易モーダル or トースト通知で表示

---

## 🚫 SNSが未対応の場合
- SNS選択時に、X以外を選択すると以下のアラートを表示：
  - 「現在このSNSはDM送信機能に未対応です（アカウント連携のみ可能）」

---

## 🔄 実行ボタンの動作（補足）
- ボタン押下時、APIを実行し、成功・失敗メッセージをトースト通知で表示
- 失敗時は `/api.md` で定義されたエラーメッセージに従う

---

## ✅ 使用技術スタック（再掲）
- Angular 19 + PrimeNG + TailwindCSS
- Firebase Authentication + Firebase Hosting
- Firebase Functions（API）

